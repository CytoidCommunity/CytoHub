(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BP2G:function(t,e,r){"use strict";r.r(e);var a=r("CcnG"),i=function(){return function(){}}(),o=r("pMnS"),s=r("pDJ3"),n=r("UcX6"),u=r("7WvE"),l=r("knpY"),c=r("AytR"),p=(r("/yc/"),function(){function t(t,e,r,a,i,o){this.route=t,this.title=e,this.proc=r,this.bili=a,this.http=i,this.translate=o,this.lastMessage={}}return t.prototype.ngAfterViewInit=function(){var t=this;this.currentRoomId=this.route.snapshot.params.id,this.translate.get("ROOM").subscribe((function(e){t.title.setTitle(e.replace("{roomId}",t.currentRoomId))})),this.route.snapshot.queryParamMap.has("loadAvatar")&&(this.proc.loadAvatar="true"===this.route.snapshot.queryParamMap.get("loadAvatar").toLowerCase()),this.route.snapshot.queryParamMap.has("levelFilter")&&(this.proc.userLevelFilter=Number(this.route.snapshot.queryParamMap.get("levelFilter"))),this.route.snapshot.queryParamMap.has("hideGiftDanmaku")&&(this.proc.hideGiftDanmaku="true"===this.route.snapshot.queryParamMap.get("hideGiftDanmaku").toLowerCase()),this.route.snapshot.queryParamMap.has("showGift")&&(this.proc.showGift="true"===this.route.snapshot.queryParamMap.get("showGift").toLowerCase()),this.route.snapshot.queryParamMap.has("giftOnly")&&(this.renderer.displayMode="true"===this.route.snapshot.queryParamMap.get("giftOnly").toLowerCase()?2:3),this.route.snapshot.queryParamMap.has("wordFilter")&&(this.proc.wordFilter=this.proc.wordFilter.concat(String(this.route.snapshot.queryParamMap.get("wordFilter")).split(","))),this.route.snapshot.queryParamMap.has("blackList")&&(this.proc.blackList=this.proc.blackList.concat(String(this.route.snapshot.queryParamMap.get("blackList")).split(",").map((function(t){return Number(t)})))),this.route.snapshot.queryParamMap.has("groupSimilar")&&(this.renderer.groupSimilar="true"===this.route.snapshot.queryParamMap.get("groupSimilar").toLowerCase()),this.route.snapshot.queryParamMap.has("pure")&&(this.proc.pure="true"===this.route.snapshot.queryParamMap.get("pure").toLowerCase()),this.route.snapshot.queryParamMap.has("minGiftValue")&&(this.proc.minGiftValue=Number(this.route.snapshot.queryParamMap.get("minGiftValue"))),this.route.snapshot.queryParamMap.has("silverGiftRatio")&&(this.proc.silverGiftRatio=Number(this.route.snapshot.queryParamMap.get("silverGiftRatio")))},t.prototype.onload=function(){var t=this;this.currentRoomId<=0?this.translate.get("IDFORMATERROR").subscribe((function(e){t.renderer.sendSystemInfo(e)})):this.proc.pure?this.start(this.currentRoomId):(this.translate.get("GETROOMINFO").subscribe((function(e){t.renderer.sendSystemInfo(e)})),this.http.get(c.a.api_server+"/stat/"+this.currentRoomId).subscribe((function(e){t.bili.ownerId=e.uid,e.config&&(t.proc.loadAvatar=null!=e.config.loadAvatar?e.config.loadAvatar:t.proc.loadAvatar,t.proc.userLevelFilter=e.config.levelFilter||t.proc.userLevelFilter,t.proc.hideGiftDanmaku=null!=e.config.hideGiftDanmaku?e.config.hideGiftDanmaku:t.proc.hideGiftDanmaku,t.proc.showGift=null!=e.config.showGift?e.config.showGift:t.proc.showGift,t.proc.minGiftValue=e.config.minGiftValue||t.proc.minGiftValue,t.proc.silverGiftRatio=e.config.silverGiftRatio||t.proc.silverGiftRatio,t.proc.wordFilter=t.proc.wordFilter.concat(e.config.wordFilter||[]),t.proc.blackList=t.proc.blackList.concat(e.config.blackList||[]),t.proc.customEmotions=e.config.customEmotions||[],t.proc.customGiftLevel=e.config.customGiftLevel||t.proc.customGiftLevel,t.proc.customGiftLevel.sort((function(t,e){return e.value-t.value})),t.renderer.displayMode=e.config.displayMode||t.renderer.displayMode,t.renderer.groupSimilar=null!=e.config.groupSimilar?e.config.groupSimilar:t.renderer.groupSimilar,t.renderer.groupSimilarWindow=e.config.groupSimilarWindow||t.renderer.groupSimilarWindow,t.renderer.maxDammakuNum=e.config.maxDammakuNumber||t.renderer.maxDammakuNum),t.start(e.room_id)}),(function(e){t.translate.get("ROOMINFORAWID").subscribe((function(e){t.renderer.sendSystemInfo(e)})),t.start(t.currentRoomId)})))},t.prototype.start=function(t){var e=this;this.translate.get("CONNECTING").subscribe((function(r){e.renderer.sendSystemInfo(r.replace("{realRoomId}",t))})),this.bili.connect(Number(t)).subscribe((function(t){"connected"===t.type?e.translate.get("CONNECTED").subscribe((function(t){e.renderer.sendSystemInfo(t)})):("danmaku"===t.type?e.lastMessage[t.uid]={time:Date.now(),message:t}:"gift"===t.type&&!t.superchat&&null!=e.lastMessage[t.uid]&&Date.now()-e.lastMessage[t.uid].time<6e4&&(t.paid_message=e.lastMessage[t.uid].message.message,e.lastMessage[t.uid]=null),e.renderer.sendDanmaku(t))}),(function(r){r.target.readyState===WebSocket.CLOSED&&(e.translate.get("CONNECTCLOSED").subscribe((function(t){e.renderer.sendSystemInfo(t)})),setTimeout((function(){return e.start(t)}),5e3))}),(function(){e.translate.get("DISCONNECTED").subscribe((function(t){e.renderer.sendSystemInfo(t)})),e.start(t)}))},t}()),h=r("ZYCi"),m=r("ZYjt"),d=r("t/Na"),f=r("A7o+"),g=a.nb({encapsulation:2,styles:[[""]],data:{}});function b(t){return a.Fb(0,[a.Cb(671088640,1,{renderer:0}),(t()(),a.pb(1,0,null,null,1,"yt-live-chat-renderer",[],null,[[null,"onawake"]],(function(t,e,r){var a=!0;return"onawake"===e&&(a=!1!==t.component.onload()&&a),a}),s.b,s.a)),a.ob(2,114688,[[1,4],["renderer",4]],0,n.a,[a.B],{displayMode:[0,"displayMode"]},{onawake:"onawake"})],(function(t,e){t(e,2,0,3)}),null)}function y(t){return a.Fb(0,[(t()(),a.pb(0,0,null,null,1,"app-alpha",[],null,null,null,b,g)),a.ob(1,4243456,null,0,p,[h.a,m.i,u.a,l.a,d.c,f.i],null,null)],null,null)}var M=a.lb("app-alpha",p,y,{},{},[]),w=r("Ip0R"),v=r("PCNd"),G=r("RdNf"),k=function(){return function(){}}();r.d(e,"AlphaModuleNgFactory",(function(){return S}));var S=a.mb(i,[],(function(t){return a.yb([a.zb(512,a.j,a.Y,[[8,[o.a,M]],[3,a.j],a.x]),a.zb(4608,w.l,w.k,[a.u,[2,w.z]]),a.zb(1073742336,w.b,w.b,[]),a.zb(1073742336,v.a,v.a,[]),a.zb(1073742336,G.a,G.a,[]),a.zb(1073742336,h.l,h.l,[[2,h.q],[2,h.k]]),a.zb(1073742336,k,k,[]),a.zb(1073742336,i,i,[]),a.zb(1024,h.i,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);